## Описание
Пет проект Фильмы - Жанры - Режиссеры на Flask + RESTx + SQLAlchemy + Marshmallow.

Модели, Схемы, Серриализация, Десерриализация, Class Based Views.

### Требования к ПО
- Python 3.10

### Установка и запуск
1. Создать и активировать виртуальное окружение
```bash
python -m venv venv

source venv/bin/activate
```

2. Установить зависимости
```bash
pip install -r requirements.txt
```

3. Запускаем проект

 - Объявляем переменные окружения
```bash
export PROJECT_DIR=/path_to_project/lesson17_project_source
export PYTHONPATH=$PROJECT_DIR
export FLASK_APP=run     
export FLASK_ENV=development   
```
- Производим первичную инициализацию базы данных
```bash
python blueprints/movie/db/db_init.py

>> Database initialized successfully
```
- Запускаем веб сервер
```bash
python flask run
```
4. Примеры запросов
```bash
GET http://127.0.0.1:5000/movies/
GET http://127.0.0.1:5000/directors/1/
DELETE http://127.0.0.1:5000/genres/5/
...
```
## Задание
В этом домашнем задании мы будем писать API для поиска фильмов с информацией об актерах, режиссерах и жанрах. У нашего API будут следующие эндпоинты:

- `/movies` — возвращает список всех фильмов, разделенный по страницам;
- `/movies/<id>` — возвращает подробную информацию о фильме.
- `/directors/` — возвращает всех режиссеров,
- `/directors/<id>` — возвращает подробную информацию о режиссере,
- `/genres/` —  возвращает всех режиссеров,
- `/genres/<id>` — возвращает информацию о жанре с перечислением списка фильмов по жанру,
- `POST /movies/` —  добавляет кино в фильмотеку,
- `PUT /movies/<id>` —  обновляет кино,
- `DELETE /movies/<id>` —  удаляет кино.

---

### Обязательное задание

### Шаг 1

Перейдите к [репозиторию](https://github.com/skypro-008/lesson17_project_source) 17-го урока, где описаны модели и хранится база данных.

Изучите приложение и запустите его.

`Movie` **Модель фильма**

`id` — идентификатор

`title` — название фильма`description`  — описание фильма

`trailer` — трейлер 

`rating` — рейтинг

`genre` — ссылка на жанр

`director` — ссылка на режиссера

*

`Genre` **Жанр**

`id` — идентификатор

`name` — название жанра

*

`Director` **Режиссер**

`id` — идентификатор

`name` — имя режиссера

### Шаг 2

Напишите сериализацию модели `Movie`.
Установите Flask-RESTX, создайте CBV для обработки GET-запроса.

- `/movies` — возвращает список всех фильмов, разделенный по страницам;
- `/movies/<id>` — возвращает подробную информацию о фильме.

### Шаг 3

Доработайте представление так, чтобы оно возвращало только фильмы с определенным режиссером по запросу типа `/movies/?director_id=1`.

### Шаг 4

Доработайте представление так, чтобы оно возвращало только фильмы определенного жанра  по запросу типа `/movies/?genre_id=1`.

## Дополнительное задание (необязательное)

### Шаг 1


Доработайте представление так, чтобы оно возвращало только фильмы с определенным режиссером и жанром по запросу типа `/movies/?director_id=2&genre_id=4`.

### Шаг 2

Добавьте реализацию методов `POST` для режиссера.

Добавьте реализацию методов `PUT` для режиссера.

Добавьте реализацию методов `DELETE` для режиссера.

### Шаг 3

Добавьте реализацию методов `POST` для жанра.

Добавьте реализацию методов `PUT` для жанра.

Добавьте реализацию методов `DELETE` для жанра.

---
[SkyPro](https://sky.pro) - [Python Developer](https://sky.pro/courses/programming/python-web-course)
